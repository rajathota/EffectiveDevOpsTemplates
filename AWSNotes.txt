aws ec2 create-key-pair --key-name EffectiveDevOpsAWS --query 'KeyMaterial' --output text > ~/.ssh/EffectiveDevOpsAWS.pem

aws ec2 describe-key-pairs --key-name EffectiveDevOpsAWS

chmod 400 ~/.ssh/EffectiveDevOpsAWS.pem


ec2.ini----------------------

[ec2]
regions = all
regions_exclude = us-gov-west-1,cn-north-1 
destination_variable = public_dns_name 
vpc_destination_variable = ip_address 
route53 = False
cache_path = ~/.ansible/tmp 
cache_max_age = 300
rds = False

---------------------------



aws cloudformation create-stack \
--capabilities CAPABILITY_IAM \
--stack-name ansible \
--template-body file://helloworld-cf-v2.template \
--parameters ParameterKey=KeyPair,ParameterValue=EffectiveDevOpsAWS

--------- ansible.cfg-------------
[defaults]
inventory = ./ec2.py
remote_user = ec2-user
become = True
become_method = sudo
become_user = root
nocows = 1

----------------------------------

ansible --private-key ~/.ssh/EffectiveDevOpsAWS.pem ec2 -m ping

ansible --private-key ~/.ssh/EffectiveDevOpsAWS.pem '3.101.148.212' -a 'df -h'



ansible-playbook helloworld.yml \
--private-key ~/.ssh/EffectiveDevOpsAWS.pem \
-e target=ec2 \
--list-hosts


ansible-playbook helloworld.yml \
--private-key ~/.ssh/EffectiveDevOpsAWS.pem \
-e target=3.101.148.212 \
--check

ansible-playbook helloworld.yml --private-key ~/.ssh/EffectiveDevOpsAWS.pem -e target=3.101.148.212 --check

git add ansible.cfg ec2.ini ec2.py
git commit -m "Configuring ansible to work with EC2"
git add roles helloworld.yml
git commit -m "Adding role for nodejs and helloworld"
git push


terraform


provider "aws" {
access_key = "AKIA2I4WWVJIAF34DD4J"
secret_key = "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"
region = "us-east-1"
}

